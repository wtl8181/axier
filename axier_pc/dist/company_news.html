<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <link rel="stylesheet" href="static/style/reset.cd1a287f.css" />
    <link rel="stylesheet" href="static/style/header.d7adb441.css" />
    <link rel="stylesheet" href="static/style/footer.04c66ec6.css" />

    <link rel="stylesheet" href="static/style/inner.62739fd1.css" />

    <link rel="stylesheet" href="static/style/jquery.fullPage.f93e02a0.css" />
    <link rel="stylesheet" href="static/style/jquery.pagination.b6694ad0.css" />
    <link rel="stylesheet" href="http://www.jq22.com/demo/jqzoom201801040045/style/jqzoom.css" />
</head>
<style>
    /*jQzoom*/
    .jqzoom {
        border: 1px solid #BBB;
        float: left;
        position: relative;
        padding: 0px;
        cursor: pointer;
    }

    div.zoomdiv {
        z-index: 999;
        position: absolute;
        top: 0px;
        left: 0px;
        width: 200px;
        height: 200px;
        background: #ffffff;
        border: 1px solid #CCCCCC;
        display: none;
        text-align: center;
        overflow: hidden;
    }

    div.jqZoomPup {
        z-index: 999;
        visibility: hidden;
        position: absolute;
        top: 0px;
        left: 0px;
        width: 50px;
        height: 50px;
        border: 1px solid #aaa;
        background: #ffffff url(/images/shopping/zoomlens.gif) 50% top no-repeat;
        opacity: 0.5;
        -moz-opacity: 0.5;
        -khtml-opacity: 0.5;
        filter: alpha(Opacity=50);
    }
</style>

<body>
    <div id="app" data-page-name="company_news">
        <template id="header" type="text/html">
            <header class="header">
                <div class="logo">
                    <a href="./index.html"></a>
                </div>
                <div class="nav clearfix">
                    <div class="item ">
                        <a href="./about_us.html" data-i18n="item1.name">关于我们</a>
                        <ul class="drop-menu">
                            <li class="">
                                <a class="" href="./about_us.html" data-i18n="item1.menu[0]">认识埃西尔</a>
                            </li>
                            <li>
                                <a class="" href="./company_news.html" data-i18n="item1.menu[1]">埃西尔人风采</a>
                            </li>
                            <li>
                                <a class="" href="./business.html" data-i18n="item1.menu[2]">业务分布</a>
                            </li>
                            <li>
                                <a class="" href="./honor.html" data-i18n="item1.menu[3]">荣誉资质</a>
                            </li>
                            <!-- <li>
            <a class="" href="./public_welfare.html" data-i18n="item1.menu[4]">公益之路</a>
          </li> -->
                        </ul>
                    </div>
                    <div class="item ">
                        <a href="./product_center.html" data-i18n="item2.name">产品中心</a>
                        <ul class="drop-menu">
                            <li>
                                <a class="" href="./product_center.html" data-i18n="item2.menu[0]">自动化设备</a>
                            </li>
                            <li>
                                <a class="" href="./equipment.html" data-i18n="item2.menu[1]">贴片设备</a>
                            </li>
                            <li>
                                <a class="" href="./accessories.html" data-i18n="item2.menu[2]">部品配件</a>
                            </li>
                        </ul>
                    </div>
                    <div class="item ">
                        <a href="./service_center.html" data-i18n="item3.name">服务中心</a>
                        <ul class="drop-menu">
                            <li>
                                <a class="" href="./service_center.html" data-i18n="item3.menu[0]">技术人员服务</a>
                            </li>
                            <li>
                                <a class="" href="./intelligent_manufacturing.html" data-i18n="item3.menu[1]">智能嵌入式工厂</a>
                            </li>
                            <li>
                                <a class="" href="./development.html" data-i18n="item3.menu[2]">软件定制服务</a>
                            </li>
                            <li>
                                <a class="" href="./lease.html" data-i18n="item3.menu[3]">设备租赁服务</a>
                            </li>
                        </ul>
                    </div>
                    <div class="item on">
                        <a href="./company_news.html" data-i18n="item4.name">公司动态</a>
                    </div>
                    <div class="item ">
                        <a href="./contact_us.html" data-i18n="item5.name">联系我们</a>
                    </div>
                    <div class="item ">
                        <a href="./join_us.html" data-i18n="item6.name">加入我们</a>
                    </div>
                </div>
                <div class="language">
                    <a href="javascript:;" data-lang="en">EN</a>/
                    <a href="javascript:;" data-lang="cn">中文</a>
                </div>
            </header>
        </template>
        <template id="page" type="text/html">
            <div class="page company_news">
                <div class="show">
                    <img data-i18n="showSrc" src="./static/images/company_news.jpg" width="100%">
                </div>
                <div class="title" data-i18n="title">公司新闻</div>
                <!-- <div class="introduction">
        
      </div> -->
                <div class="news">
                    <div class="news_show clearfix"></div>
                    <div class="news_box">
                        <div class="list clearfix"></div>
                        <div class="pagination m-style"></div>
                    </div>
                </div>
                <div class="news_detail"></div>
            </div>
        </template>
        <template id="footer" type="text/html">
            <footer class="footer">
                <div class="top clearfix">
                    <ul>
                        <li class="first">
                            <a href="./about_us.html" data-json="@{data}" data-i18n="item1.name">关于我们</a>
                        </li>
                        <li>
                            <a href="./about_us.html" class="" data-i18n="item1.menu[0]">认识埃西尔</a>
                        </li>
                        <li>
                            <a href="./company_news.html" class="" data-i18n="item1.menu[1]">埃西尔人风采</a>
                        </li>
                        <li>
                            <a href="./business.html" class="" data-i18n="item1.menu[2]">业务分布</a>
                        </li>
                        <li>
                            <a href="./honor.html" class="" data-i18n="item1.menu[3]">荣誉资质</a>
                        </li>
                        <!-- <li>
          <a href="./public_welfare.html" class="" data-i18n="item1.menu[4]">公益之路</a>
        </li> -->
                    </ul>
                    <ul>
                        <li class="first">
                            <a href="./product_center.html" data-i18n="item2.name">产品中心</a>
                        </li>
                        <li>
                            <a href="./product_center.html" class="" data-i18n="item2.menu[0]">自动化设备</a>
                        </li>
                        <li>
                            <a href="./equipment.html" class="" data-i18n="item2.menu[1]">贴片设备</a>
                        </li>
                        <li>
                            <a href="./accessories.html" class="" data-i18n="item2.menu[2]">部品配件</a>
                        </li>
                    </ul>
                    <ul>
                        <li class="first">
                            <a href="./service_center.html" data-i18n="item3.name">服务中心</a>
                        </li>
                        <li>
                            <a href="./service_center.html" class="" data-i18n="item3.menu[0]">技术人员服务</a>
                        </li>
                        <li>
                            <a href="./intelligent_manufacturing.html" class="" data-i18n="item3.menu[1]">智能嵌入式工厂</a>
                        </li>
                        <li>
                            <a href="./development.html" class="" data-i18n="item3.menu[2]">软件定制服务</a>
                        </li>
                        <li>
                            <a href="./lease.html" class="" data-i18n="item3.menu[3]">设备租赁服务</a>
                        </li>
                    </ul>
                    <ul class="rl">
                        <li class="first">
                            <a href="./company_news.html" class="on" data-i18n="item4.name">公司新闻</a>
                        </li>
                        <li class="first">
                            <a href="./contact_us.html" class="" data-i18n="item5.name">联系我们</a>
                        </li>
                        <li class="first">
                            <a href="./join_us.html" class="" data-i18n="item6.name">加入我们</a>
                        </li>
                    </ul>
                </div>
                <div class="bottom">
                    <ul>
                        <li data-i18n="info[0]">深圳市埃西尔电子有限公司</li>
                        <li data-i18n="info[1]">地址：深圳市宝安区石岩街道环宇达工业区十栋</li>
                        <li data-i18n="info[2]">邮编：518108</li>
                        <li data-i18n="info[3]">电话：0755—2783 1645 27831685</li>
                        <li data-i18n="info[4]">传真：0755—27831701</li>
                    </ul>
                </div>
            </footer>
        </template>
    </div>
</body>
<script src="https://libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
<script src="static/js/jquery.jqzoom.4886159a.js"></script>
<script src="static/js/template.ca0b234d.js"></script>
<script src="static/js/util.ba4f7a3f.js"></script>
<script src="static/js/jquery.fullPage.58000ff4.js"></script>
<script src="static/js/jquery.pagination.e6473c64.js"></script>
<script src="static/js/jquery.i18n.3600b16f.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/i18next/8.1.0/i18next.min.js" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-i18next/1.2.0/jquery-i18next.min.js" ></script> -->
<script src="static/js/jquery.validate.9fe54727.js"></script>
<script src="static/js/moment.2c6da42f.js"></script>
<script src="static/js/common.6f912c17.js"></script>
<script src="static/js/api.7a242aee.js"></script>
<script id="news_top" type="text/html">
    <div class="img">
    <img src="@{data.cover}" width="100%" height="100%">
  </div>
  <div class="info">
    <h2 class="title">
      @{data.title}
    </h2>
    <div class="bar"></div>
    <div class="content">
      @{data.info}
      <a class="show_info" data-detail="@{data.detail}" data-articleId="@{data.articleId}">详情</a>
    </div>
  </div>
</script>
<script id="news_list" type="text/html">
    @{each data as value index}
  <div class="item" data-detail="@{value.detail}" data-articleId="@{value.articleId}">
    <div class="img">
      <img src="@{value.cover}" width="100%" height="200">
    </div>
    <div class="date">
      <span>@{value.creatTime}</span>
      <div class="bar"></div>
    </div>
    <div class="info">
      <div class="title">@{value.title}</div>
      <div class="content">@{value.info}</div>
    </div>
  </div>
  @{/each}
</script>
<script id="news_detail" type="text/html">
    <div class="view">
    @{# detail}
  </div>
  <div class="controls clearfix">
    @{if nextArticleId - prevArticleId == 2 || nextArticleId == total}
    <div class="btn previous" data-articleId="@{prevArticleId}">上一篇：@{prevTitle}</div>
    @{/if}
    @{if nextArticleId - prevArticleId == 2 || prevArticleId == 1}
    <div class="btn next" data-articleId="@{nextArticleId}">下一篇：@{nextTitle}</div>
    @{/if}
    <div class="back">返回列表</div>
  </div>
</script>
<script>
    $(function() {
        $(".first_nav > li > span").on('click', function() {
            var inner_nav = $(this).parent().find('.inner_nav');
            inner_nav.toggleClass("hide")
        })
        var currentPageNum = '',
            articleId = '',
            detail = '',
            total = ''
        $(document).on('click', '.news_box .item', function() {
            detail = $(this).attr('data-detail');
            articleId = $(this).attr('data-articleId')
            // getNewsDetail(detail)
            // $(".news_detail").show()
            api.getPageNum(articleId, function(data) {
                currentPageNum = data.rows[0]
                var prevTitle = '',
                    nextTitle = '',
                    prevArticleId = '',
                    nextArticleId = ''
                api.getNewsList(3, currentPageNum - 1, 1, function(data) {
                    prevTitle = data.rows[0].title,
                        prevArticleId = data.rows[0].articleId
                    api.getNewsList(3, currentPageNum + 1, 1, function(data) {
                        nextTitle = data.rows[0].title
                        nextArticleId = data.rows[0].articleId
                        // console.log(prevArticleId,nextArticleId)
                        getNewsDetail(detail, prevTitle, nextTitle, prevArticleId, nextArticleId, data.total)
                    })
                })
            })
        })
        $(document).on("click", ".news_detail .back", function() {
            $(".news").show();
            $(".news_detail").hide()
        })
        $(document).on("click", ".news_detail .previous", function() {
            currentPageNum = currentPageNum - 1
            var articleId = $(this).attr('data-articleId')
            api.getPageNum(articleId, function(data) {
                currentPageNum = data.rows[0]
                var prevTitle = '',
                    nextTitle = '',
                    prevArticleId = '',
                    nextArticleId = ''
                api.getNewsList(3, currentPageNum, 1, function(currentData) {
                    api.getNewsList(3, currentPageNum - 1, 1, function(data) {
                        prevTitle = data.rows[0].title,
                            prevArticleId = data.rows[0].articleId
                        detail = data.rows[0].detail
                        api.getNewsList(3, currentPageNum + 1, 1, function(data) {
                            nextTitle = data.rows[0].title
                            nextArticleId = data.rows[0].articleId
                            detail = currentData.rows[0].detail
                            // console.log(prevArticleId,nextArticleId)
                            getNewsDetail(detail, prevTitle, nextTitle, prevArticleId, nextArticleId, data.total)
                        })
                    })
                })
            })
            $(".news_detail").show()
        })
        $(document).on("click", ".news_show .show_info", function() {
            var articleId = $(this).attr('data-articleId'),
                detail = $(this).attr('data-detail');
            api.getPageNum(articleId, function(data) {
                currentPageNum = data.rows[0]
                var prevTitle = '',
                    nextTitle = '',
                    prevArticleId = '',
                    nextArticleId = ''
                api.getNewsList(3, currentPageNum - 1, 1, function(data) {
                    prevTitle = data.rows[0].title,
                        prevArticleId = data.rows[0].articleId
                    detail = data.rows[0].detail
                    api.getNewsList(3, currentPageNum + 1, 1, function(data) {
                        nextTitle = data.rows[0].title
                        nextArticleId = data.rows[0].articleId
                        // console.log(prevArticleId,nextArticleId)
                        getNewsDetail(detail, prevTitle, nextTitle, prevArticleId, nextArticleId, data.total)
                    })
                })
            })
            $(".news_detail").show()
        })
        $(document).on("click", ".news_detail .next", function() {
            currentPageNum = currentPageNum + 1
            var articleId = $(this).attr('data-articleId')
            api.getPageNum(articleId, function(data) {
                currentPageNum = data.rows[0]
                var prevTitle = '',
                    nextTitle = '',
                    prevArticleId = '',
                    nextArticleId = ''
                api.getNewsList(3, currentPageNum, 1, function(currentData) {
                    api.getNewsList(3, currentPageNum - 1, 1, function(data) {
                        prevTitle = data.rows[0].title,
                            prevArticleId = data.rows[0].articleId
                        api.getNewsList(3, currentPageNum + 1, 1, function(data) {
                            nextTitle = data.rows[0].title
                            nextArticleId = data.rows[0].articleId
                            detail = currentData.rows[0].detail
                            console.log(detail)
                            getNewsDetail(detail, prevTitle, nextTitle, prevArticleId, nextArticleId, data.total)
                        })
                    })
                })
            })
            $(".news_detail").show()
        })

        function getNewsTop() {
            api.getNewsTop(function(data) {
                var html = template("news_top", {
                    data: data.rows[0]
                })
                $(".news_show").html(html)
            })
        }
        getNewsTop()

        function getNewsList() {
            api.getNewsList(3, 1, 4, function(data) {
                data.rows.forEach(function(item, index) {
                    data.rows[index].creatTime = moment(item.creatTime).format("MM/DD")
                    console.log(moment(item.creatTime).format("MM/DD"))
                })
                var html = template('news_list', {
                        data: data.rows
                    }),
                    total = data.total
                pageCount = Math.ceil(data.total / 4);
                $(".news_box .list").html(html)
                $('.pagination').pagination({
                    pageCount: pageCount,
                    jump: false,
                    coping: true,
                    homePage: '首页',
                    endPage: '末页',
                    prevCls: 'prev',
                    nextCls: 'next',
                    prevContent: '上一页',
                    nextContent: '下一页',
                    callback: function(page) {
                        var current = page.getCurrent();
                        api.getNewsList(3, current, 4, function(data) {
                            data.rows.forEach(function(item, index) {
                                data.rows[index].creatTime = moment(item.creatTime).format("MM/DD")
                                console.log(moment(item.creatTime).format("MM/DD"))
                            })
                            var html = template('news_list', {
                                data: data.rows
                            })
                            $(".news_box .list").html(html)
                        })
                    }
                });
                if (pageCount == 1) {
                    $(".pagination").hide();
                }
            })
        }
        getNewsList();

        function getNewsDetail(detail, prevTitle, nextTitle, prevArticleId, nextArticleId, total) {
            console.log(prevArticleId, nextArticleId)
            var html = template('news_detail', {
                detail: detail,
                prevTitle: prevTitle,
                nextTitle: nextTitle,
                prevArticleId: prevArticleId,
                nextArticleId: nextArticleId,
                total: total
            })
            $(".news").hide();
            $(".news_detail").html(html).show()
        }
    })
</script>